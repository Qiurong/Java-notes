# Dubbo笔记

## 架构

### 核心组件

架构中有四个**核心组件**：生产者，消费者，注册中心和监控中心。

<img src="./img/Dubbo_Architecture.png"  height = 60% width = 60%>

#### 过程

0. 生产者(provider)初始化和启动服务。
1. 生产者到注册中心(registry)去注册服务。
   - 发布接口服务
   - 暴露host（IP地址）
2. 消费者到注册中心去订阅服务。
3. 注册中心通知(notify)服务给消费者。
4. 消费者调用生产者提供的服务
   - 调用dubbo协议的接口方法
5. 监控器(monitor)统计并监控服务调用。

## ToDo

1. dubbo负载均衡算法

   | 策略                            | 描述                                                         | 优点                                                   | 缺点                                                     |
   | ------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------ | -------------------------------------------------------- |
   | 随机<br />random                | 请求随机落到服务器上。<br />一般为**加权随机**，权重越大请求落的可能性越高。 | 实现简单<br />调用量越大越均匀                         | 调用次数较少的情况下请求可能都落在权重最大的那个机器上。 |
   | 轮询<br />round-robin           | 轮询所有机器。<br />一般为**加权轮询**，                     | 实现简单                                               | 某个机器处理慢会导致请求积压。                           |
   | 最少活跃请求<br />least-active  | 每个provider提供一个active活跃数代表目前正在处理的请求数，每收到一个请求active+1，完成一个请求active-1。 | 将请求落到目前最“空闲”的服务器上，避免了服务积压问题。 |                                                          |
   | 一致性哈希<br />consistent-hash | 把 **服务器**和**请求** hash到一致性哈希环上，请求落到 **按顺时针方向** 环上离其最近的服务器上。<br />物理服务器虚拟化为虚拟节点，从而相当于加权。快的服务器虚拟化为多个节点。 | 服务端结点不变的情况下，同一请求落到同一机器上。<br /> | 可能会调用不均匀。                                       |
   |                                 |                                                              |                                                        |                                                          |

   

   

   

   随机，轮询，最少活跃请求数，一致性hash。

2. dubbo原理

3. 什么是dubbo？dubbo是干嘛的？

4. 什么是zookeeper？zookeeper是干嘛的？

5. 什么是RPC？有哪些RPC框架？你觉得实现一个RPC框架重点在什么？

6. 

