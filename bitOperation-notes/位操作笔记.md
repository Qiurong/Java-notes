

# 位操作笔记

## 机器数

在计算机中所有数据都是以二进制的形式储存的，而一个由0和1构成的数值有四种表示方式，分别是原码、反码、补码。需要注意的是，计算机中只存储整数的**补码**。

- **原码**

1. 正数的原码就是它本身。

   整数+10的原码：0000 1010

2. 负数用最高位置1(符号位)表示负数

   整数-10的原码：1000 1010

- **反码**

1. 正数的反码 = 原码

   整数+10的反码：0000 1010

2. 负数的反码：符号位不变，数值位按位取反。

   整数-10的原码：1111 0101

- **补码**

1. 正数的补码 = 原码

   整数+10的反码：0000 1010

2. 负数的补码 = 反码 + 1

   整数-10的反码：1111 0110

   总结：正数的补码 = 原码，正数的补码 = 数值位按位取反 + 1。

## 位操作符

Java中的位操作符包含：与（&）、或（|）、非/取反（~）、异或（^）、左移、右移。在这六种中，只有取反是单目操作符，其他都是双目操作符。

与（&）：129 & 128 = 128

或（|）：129 | 128 = 129

非（~）：所有位数按位取反，包括符号位。

异或（^）：两个操作数的位中，相同则结果为0，不同则结果为1。

- 左移

  m << n：把m表示的二进制数的补码**带符号位左移**n位，**高位移出，低位补零**。

  当n大于该类型的最大位数，则进行取模，如对Integer左移34位，则实际左移两位。

  一般意义下，m左移n位 = m * 2^n，但需要注意值溢出的情况。

  一般在源码阅读中会发现用`>>`代替 *** 2**从而提高效率。

  <img src="./img/左移.PNG"/>

- 右移

  - 右移(>>)

    m >> n：把m表示的二进制数的补码右移n位。如果该数为正，则高位补0，若为负数，则高位补1。

    <img src="./img/右移.PNG"/>

  - 无符号右移(>>>)

    m >>> n：把m表示的二进制数的补码右移n位。若该数为正，则高位补0，而若该数为负数，则右移后高位同样补0。

    <img src="./img/无符号右移.PNG"/>

## 常见操作



## 实际应用



## 参考文献

- [Java基础-原码反码补码](https://www.cnblogs.com/yinzhengjie/p/8666354.html)
- [聊聊Java中的位运算：与、或、非、异或、左移、右移、无符号右移](https://cloud.tencent.com/developer/article/1587912)

- [java中的位操作、移位操作](https://www.cnblogs.com/zhjh256/p/12540585.html)
- [Java中的左移、右移详细分析](https://blog.csdn.net/kaixuansui/article/details/92806813)